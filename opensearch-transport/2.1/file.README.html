<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.28
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-OpenSearch-3A-3ATransport">OpenSearch::Transport</h1>

<p><strong>This library is part of the &lt;code&gt;opensearch-ruby&lt;/code&gt;[https://github.com/opensearch-project/opensearch-ruby/] package; please refer to it, unless you want to use this library standalone.</strong></p>
<hr>

<p>The <code>opensearch-transport</code> library provides a low-level Ruby client for connecting to an <a href="http://opensearch.com">OpenSearch</a> cluster.</p>

<p>It handles connecting to multiple nodes in the cluster, rotating across connections, logging and tracing requests and responses, maintaining failed connections, discovering nodes in the cluster, and provides an abstraction for data serialization and transport.</p>

<p>It does not handle calling the OpenSearch API; see the href="https://github.com/opensearch-project/opensearch-ruby/tree/main/opensearch-api"></a> library.</p>

<p>The library is compatible with Ruby 1.9 or higher and with all versions of OpenSearch since 1.0.0.</p>

<p>Features overview:</p>
<ul><li>
<p>Pluggable logging and tracing</p>
</li><li>
<p>Pluggable connection selection strategies (round-robin, random, custom)</p>
</li><li>
<p>Pluggable transport implementation, customizable and extendable</p>
</li><li>
<p>Pluggable serializer implementation</p>
</li><li>
<p>Request retries and dead connections handling</p>
</li><li>
<p>Node reloading (based on cluster state) on errors or on demand</p>
</li></ul>

<p>For optimal performance, use a HTTP library which supports persistent (“keep-alive”) connections, such as <a href="https://github.com/toland/patron">Patron</a> or <a href="https://github.com/typhoeus/typhoeus">Typhoeus</a>. Most such HTTP libraries are used through the <a href="https://rubygems.org/gems/faraday">Faraday</a> HTTP library and its <a href="https://github.com/lostisland/awesome-faraday/#adapters">adapters</a>.</p>

<p>Include the library’s gem and adapter gem, and require the library and adapter in your code, and it will be automatically used. If you don’t use Bundler, you may need to require the library explicitly (like <code>require &#39;faraday/patron&#39;</code>).</p>

<p>Currently these libraries will be automatically detected and used: - <a href="https://github.com/toland/patron">Patron</a> through <a href="https://github.com/lostisland/faraday-patron">faraday-patron</a> - <a href="https://github.com/typhoeus/typhoeus">Typhoeus</a> through <a href="https://github.com/dleavitt/faraday-typhoeus">faraday-typhoeus</a> for Faraday 2 or higher, or Faraday’s built-in adapter for Faraday 1. - <a href="https://rubygems.org/gems/httpclient">HTTPClient</a> through <a href="https://github.com/lostisland/faraday-httpclient">faraday-httpclient</a> - <a href="https://rubygems.org/gems/net-http-persistent">Net::HTTP::Persistent</a> through <a href="https://github.com/lostisland/faraday-net_http_persistent">faraday-net_http_persistent</a></p>

<p><strong>Note on Typhoeus[https://github.com/typhoeus/typhoeus]</strong>: You need to use v1.4.0 or up since older versions are not compatible with Faraday 1.0 or higher.</p>

<p><strong>Note on Faraday[https://rubygems.org/gems/faraday]</strong>: If you use Faraday 2.0 or higher, if the adapter is in a separate gem, you will likely need to declare that gem as well. Only the Net::HTTP adapter gem is included by default. Faraday 1.x includes most common adapter gems already.</p>

<p>For detailed information, see example configurations <a href="#transport-implementations">below</a>.</p>

<h2 id="label-Installation">Installation</h2>

<p>Install the package from <a href="https://rubygems.org">Rubygems</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='id identifier rubyid_install'>install</span> <span class='id identifier rubyid_opensearch'>opensearch</span><span class='op'>-</span><span class='id identifier rubyid_transport'>transport</span>
</code></pre>

<p>To use an unreleased version, either add it to your <code>Gemfile</code> for <a href="http://gembundler.com">Bundler</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>opensearch-transport</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>git:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>git://github.com/opensearch-project/opensearch-ruby.git</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>or install it from a source code checkout:</p>

<pre class="code ruby"><code class="ruby">git clone https://github.com/opensearch-project/opensearch-ruby
cd opensearch-ruby/opensearch-transport
bundle install
rake install
</code></pre>

<h2 id="label-Example+Usage">Example Usage</h2>

<p>In the simplest form, connect to Elasticsearch running on <a href="http://localhost:9200">localhost:9200</a> without any configuration:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>opensearch/transport</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_perform_request'>perform_request</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GET</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_cluster/health</span><span class='tstring_end'>&#39;</span></span>
<span class='comment'># =&gt; #&lt;OpenSearch::Transport::Transport::Response:0x007fc5d506ce38 @status=200, @body={ ... } &gt;
</span></code></pre>

<h2 id="label-Configuration">Configuration</h2>
<ul><li>
<p><a href="#setting-hosts">Setting Hosts</a></p>
</li><li>
<p><a href="#default-port">Default port</a></p>
</li><li>
<p><a href="#authentication">Authentication</a></p>
</li><li>
<p><a href="#logging">Logging</a></p>
</li><li>
<p><a href="#custom-http-headers">Custom HTTP Headers</a></p>
</li><li>
<p><a href="#identifying-running-tasks-with-x-opaque-id">Identifying running tasks with X-Opaque-Id</a></p>
</li><li>
<p><a href="#setting-timeouts">Setting Timeouts</a></p>
</li><li>
<p><a href="#randomizing-hosts">Randomizing Hosts</a></p>
</li><li>
<p><a href="#retrying-on-failures">Retrying on Failures</a></p>
</li><li>
<p><a href="#reloading-hosts">Reloading Hosts</a></p>
</li><li>
<p><a href="#connection-selector">Connection Selector</a></p>
</li><li>
<p><a href="#transport-implementations">Transport Implementations</a></p>
</li><li>
<p><a href="#serializer-implementations">Serializer implementations</a></p>
</li><li>
<p><a href="#exception-handling">Exception Handling</a></p>
</li><li>
<p><a href="#development-and-community">Development and Community</a></p>
</li></ul>

<p>The client supports many configurations options for setting up and managing connections, configuring logging, customizing the transport library, etc.</p>

<h3 id="label-Setting+Hosts">Setting Hosts</h3>

<p>To connect to a specific OpenSearch host:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>host:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>search.myserver.com</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>To connect to a host with specific port:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>host:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>myhost:8080</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>To connect to multiple hosts:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>hosts:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>myhost1</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>myhost2</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
</code></pre>

<p>Instead of Strings, you can pass host information as an array of Hashes:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>hosts:</span> <span class='lbracket'>[</span> <span class='lbrace'>{</span> <span class='label'>host:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>myhost1</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>port:</span> <span class='int'>8080</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>host:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>myhost2</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>port:</span> <span class='int'>8080</span> <span class='rbrace'>}</span> <span class='rbracket'>]</span>
</code></pre>

<p><strong>NOTE:</strong> When specifying multiple hosts, you probably want to enable the <code>retry_on_failure</code> option to  perform a failed request on another node (see the <em>Retrying on Failures</em> chapter).</p>

<p>Common URL parts – scheme, HTTP authentication credentials, URL prefixes, etc – are handled automatically:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>url:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>https://username:password@api.server.org:4430/search</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>You can pass multiple URLs separated by a comma:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>urls:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http://localhost:9200,http://localhost:9201</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>Another way to configure the URL(s) is to export the <code>OPENSEARCH_URL</code> variable.</p>

<p>The client will automatically round-robin across the hosts (unless you select or implement a different <a href="#connection-selector">connection selector</a>).</p>

<h3 id="label-Default+port">Default port</h3>

<p>The default port is <code>9200</code>. Please specify a port for your host(s) if they differ from this default.</p>

<h3 id="label-Authentication">Authentication</h3>

<p>You can pass the authentication credentials, scheme and port in the host configuration hash:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>hosts:</span> <span class='lbracket'>[</span>
  <span class='lbrace'>{</span> <span class='label'>host:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my-protected-host</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>port:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>443</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>user:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>USERNAME</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>password:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>PASSWORD</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>scheme:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>https</span><span class='tstring_end'>&#39;</span></span>
  <span class='rbrace'>}</span> <span class='rbracket'>]</span>
</code></pre>

<p>… or simply use the common URL format:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>url:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>https://username:password@example.com:9200</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>To pass a custom certificate for SSL peer verification to Faraday-based clients, use the <code>transport_options</code> option:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>url:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>https://username:password@example.com:9200</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                          <span class='label'>transport_options:</span> <span class='lbrace'>{</span> <span class='label'>ssl:</span> <span class='lbrace'>{</span> <span class='label'>ca_file:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/path/to/cacert.pem</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
</code></pre>

<p>You can also use <strong>API Key authentication</strong></p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
  <span class='label'>host:</span> <span class='id identifier rubyid_host'>host</span><span class='comma'>,</span>
  <span class='label'>transport_options:</span> <span class='id identifier rubyid_transport_options'>transport_options</span><span class='comma'>,</span>
  <span class='label'>api_key:</span> <span class='id identifier rubyid_credentials'>credentials</span>
<span class='rparen'>)</span>
</code></pre>

<p>Where credentials is either the base64 encoding of <code>id</code> and <code>api_key</code> joined by a colon or a hash with the <code>id</code> and <code>api_key</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
  <span class='label'>host:</span> <span class='id identifier rubyid_host'>host</span><span class='comma'>,</span>
  <span class='label'>transport_options:</span> <span class='id identifier rubyid_transport_options'>transport_options</span><span class='comma'>,</span>
  <span class='label'>api_key:</span> <span class='lbrace'>{</span><span class='label'>id:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my_id</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>api_key:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my_api_key</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
<span class='rparen'>)</span>
</code></pre>

<h3 id="label-Logging">Logging</h3>

<p>To log requests and responses to standard output with the default logger (an instance of Ruby’s Logger class), set the <code>log</code> argument to true:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>log:</span> <span class='kw'>true</span><span class='rparen'>)</span>
</code></pre>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_logger'>logger</span> <span class='op'>=</span> <span class='const'>EcsLogging</span><span class='op'>::</span><span class='const'>Logger</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='gvar'>$stdout</span><span class='rparen'>)</span>
<span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>logger:</span> <span class='id identifier rubyid_logger'>logger</span><span class='rparen'>)</span>
</code></pre>

<p>To trace requests and responses in the <em>Curl</em> format, set the <code>trace</code> argument:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>trace:</span> <span class='kw'>true</span><span class='rparen'>)</span>
</code></pre>

<p>You can customize the default logger or tracer:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_transport'>transport</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_formatter'>formatter</span> <span class='op'>=</span> <span class='id identifier rubyid_proc'>proc</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='id identifier rubyid_d'>d</span><span class='comma'>,</span> <span class='id identifier rubyid_p'>p</span><span class='comma'>,</span> <span class='id identifier rubyid_m'>m</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_s'>s</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_m'>m</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_transport'>transport</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_level'>level</span> <span class='op'>=</span> <span class='const'>Logger</span><span class='op'>::</span><span class='const'>INFO</span>
</code></pre>

<p>Or, you can use a custom <code>::Logger</code> instance:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>logger:</span> <span class='const'>Logger</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>STDERR</span><span class='rparen'>)</span><span class='rparen'>)</span>
</code></pre>

<p>You can pass the client any conforming logger implementation:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>logging</span><span class='tstring_end'>&#39;</span></span> <span class='comment'># https://github.com/TwP/logging/
</span>
<span class='id identifier rubyid_log'>log</span> <span class='op'>=</span> <span class='const'>Logging</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>opensearch</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_add_appenders'>add_appenders</span> <span class='const'>Logging</span><span class='period'>.</span><span class='id identifier rubyid_appenders'>appenders</span><span class='period'>.</span><span class='id identifier rubyid_stdout'>stdout</span>
<span class='id identifier rubyid_log'>log</span><span class='period'>.</span><span class='id identifier rubyid_level'>level</span> <span class='op'>=</span> <span class='symbol'>:info</span>

<span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>logger:</span> <span class='id identifier rubyid_log'>log</span><span class='rparen'>)</span>
</code></pre>

<h3 id="label-Custom+HTTP+Headers">Custom HTTP Headers</h3>

<p>You can set a custom HTTP header on the client’s initializer:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
  <span class='label'>transport_options:</span> <span class='lbrace'>{</span>
    <span class='label'>headers:</span>
      <span class='lbrace'>{</span><span class='label'>user_agent:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>My App</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
  <span class='rbrace'>}</span>
<span class='rparen'>)</span>
</code></pre>

<p>You can also pass in <code>headers</code> as a parameter to any of the API Endpoints to set custom headers for the request:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span class='label'>index:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>myindex</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>q:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>title:test</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='lbrace'>{</span><span class='label'>user_agent:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>My App</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
</code></pre>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span class='label'>index:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>myindex</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>q:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>title:test</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>opaque_id:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>123456</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
</code></pre>

<p>The search request will include the following HTTP Header:</p>

<pre class="code ruby"><code class="ruby">X-Opaque-Id: 123456
</code></pre>

<p>You can also set a prefix for X-Opaque-Id when initializing the client. This will be prepended to the id you set before each request if you’re using X-Opaque-Id. Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>opaque_id_prefix:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>eu-west1</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span class='label'>index:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>myindex</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>q:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>title:test</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>opaque_id:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>123456</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
</code></pre>

<p>The request will include the following HTTP Header:</p>

<pre class="code ruby"><code class="ruby">X-Opaque-Id: eu-west1_123456
</code></pre>

<h3 id="label-Setting+Timeouts">Setting Timeouts</h3>

<p>For many operations in Elasticsearch, the default timeouts of HTTP libraries are too low. To increase the timeout, you can use the <code>request_timeout</code> parameter:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>request_timeout:</span> <span class='int'>5</span><span class='op'>*</span><span class='int'>60</span>
</code></pre>

<p>You can also use the <code>transport_options</code> argument documented below.</p>

<h3 id="label-Randomizing+Hosts">Randomizing Hosts</h3>

<p>If you pass multiple hosts to the client, it rotates across them in a round-robin fashion, by default. When the same client would be running in multiple processes (eg. in a Ruby web server such as Thin), it might keep connecting to the same nodes “at once”. To prevent this, you can randomize the hosts collection on initialization and reloading:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>hosts:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9200</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9201</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>randomize_hosts:</span> <span class='kw'>true</span>
</code></pre>

<h3 id="label-Retrying+on+Failures">Retrying on Failures</h3>

<p>When the client is initialized with multiple hosts, it makes sense to retry a failed request on a different host:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>hosts:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9200</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9201</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>retry_on_failure:</span> <span class='kw'>true</span>
</code></pre>

<p>By default, the client will retry the request 3 times. You can specify how many times to retry before it raises an exception by passing a number to <code>retry_on_failure</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>hosts:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9200</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9201</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>retry_on_failure:</span> <span class='int'>5</span>
</code></pre>

<p>These two parameters can also be used together:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>hosts:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9200</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9201</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>retry_on_status:</span> <span class='lbracket'>[</span><span class='int'>502</span><span class='comma'>,</span> <span class='int'>503</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>retry_on_failure:</span> <span class='int'>10</span>
</code></pre>

<h3 id="label-Reloading+Hosts">Reloading Hosts</h3>

<p>OpenSearch by default dynamically discovers new nodes in the cluster. You can leverage this in the client, and periodically check for new nodes to spread the load.</p>

<p>To retrieve and use the information from the Nodes Info API on every 10,000th request:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>hosts:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9200</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9201</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>reload_connections:</span> <span class='kw'>true</span>
</code></pre>

<p>You can pass a specific number of requests after which the reloading should be performed:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>hosts:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9200</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9201</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>reload_connections:</span> <span class='int'>1_000</span>
</code></pre>

<p>To reload connections on failures, use:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>hosts:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9200</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9201</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>reload_on_failure:</span> <span class='kw'>true</span>
</code></pre>

<p>The reloading will timeout if not finished under 1 second by default. To change the setting:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>hosts:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9200</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9201</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>sniffer_timeout:</span> <span class='int'>3</span>
</code></pre>

<p><strong>NOTE:</strong> When using reloading hosts (“sniffing”) together with authentication, just pass the scheme,  user and password with the host info – or, for more clarity, in the <code>http</code> options:</p>

<pre class="code ruby"><code class="ruby"><span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>host:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost:9200</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
                          <span class='label'>http:</span> <span class='lbrace'>{</span> <span class='label'>scheme:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>https</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>user:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>U</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>password:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>P</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
                          <span class='label'>reload_connections:</span> <span class='kw'>true</span><span class='comma'>,</span>
                          <span class='label'>reload_on_failure:</span> <span class='kw'>true</span>
</code></pre>

<h3 id="label-Connection+Selector">Connection Selector</h3>

<p>By default, the client will rotate the connections in a round-robin fashion, using the <span class='object_link'><a href="OpenSearch/Transport/Transport/Connections/Selector/RoundRobin.html" title="OpenSearch::Transport::Transport::Connections::Selector::RoundRobin (class)">OpenSearch::Transport::Transport::Connections::Selector::RoundRobin</a></span> strategy.</p>

<p>You can implement your own strategy to customize the behaviour. For example, let’s have a “rack aware” strategy, which will prefer the nodes with a specific attribute Only when these would be unavailable, the strategy will use the other nodes:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>RackIdSelector</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport.html" title="OpenSearch::Transport (module)">Transport</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport.html" title="OpenSearch::Transport::Transport (module)">Transport</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport/Connections.html" title="OpenSearch::Transport::Transport::Connections (module)">Connections</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport/Connections/Selector.html" title="OpenSearch::Transport::Transport::Connections::Selector (module)">Selector</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport/Connections/Selector/Base.html" title="OpenSearch::Transport::Transport::Connections::Selector::Base (module)">Base</a></span></span>

  <span class='kw'>def</span> <span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_connections'>connections</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span>
      <span class='comment'># Try selecting the nodes with a `rack_id:x1` attribute first
</span>      <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_host'>host</span><span class='lbracket'>[</span><span class='symbol'>:attributes</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_host'>host</span><span class='lbracket'>[</span><span class='symbol'>:attributes</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:rack_id</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x1</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span> <span class='op'>||</span> <span class='id identifier rubyid_connections'>connections</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_sample'>sample</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>hosts:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x1.search.org</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>x2.search.org</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>selector_class:</span> <span class='const'>RackIdSelector</span>
</code></pre>

<h3 id="label-Transport+Implementations">Transport Implementations</h3>

<p>By default, the client will use the href="https://rubygems.org/gems/faraday"></a> HTTP library as a transport implementation.</p>

<p>It will auto-detect and use an <em>adapter</em> for <em>Faraday</em> based on gems loaded in your code, preferring HTTP clients with support for persistent connections.</p>

<p>Faraday uses adapters, usually in separate gems, to connect to the HTTP library. You need to make sure that your code refers to both the HTTP library gem and the adapter gem. See this list of <a href="https://github.com/lostisland/awesome-faraday/#adapters">Faraday adapters</a> for details.</p>

<p>To use the href="https://github.com/toland/patron"></a> HTTP, for example, you need to refer to these gems:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>patron</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>faraday-patron</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>If you don’t use Bundler, you may need to require the libraries explicitly in your code:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>patron</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>faraday/patron</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>Then, create a new client, and the <em>Patron</em> gem will be used as the “driver”:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

<span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_transport'>transport</span><span class='period'>.</span><span class='id identifier rubyid_connections'>connections</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_adapter'>adapter</span>
<span class='comment'># =&gt; Faraday::Adapter::Patron
</span>
<span class='int'>10</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_nodes'>nodes</span><span class='period'>.</span><span class='id identifier rubyid_stats'>stats</span><span class='lparen'>(</span><span class='label'>metric:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nodes</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_n'>n</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> : </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_n'>n</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>total_opened</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='comment'># =&gt; Stiletoo : 24
</span><span class='comment'># =&gt; Stiletoo : 24
</span><span class='comment'># =&gt; Stiletoo : 24
</span><span class='comment'># =&gt; ...
</span></code></pre>

<p>To use a specific adapter for <em>Faraday</em>, pass it as the <code>adapter</code> argument:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>adapter:</span> <span class='symbol'>:net_http_persistent</span>

<span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_transport'>transport</span><span class='period'>.</span><span class='id identifier rubyid_connections'>connections</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_builder'>builder</span><span class='period'>.</span><span class='id identifier rubyid_handlers'>handlers</span>
<span class='comment'># =&gt; [Faraday::Adapter::NetHttpPersistent]
</span></code></pre>

<p>To pass options to the href="https://github.com/lostisland/faraday/blob/master/lib/faraday/connection.rb"></a> constructor, use the <code>transport_options</code> key:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>transport_options:</span> <span class='lbrace'>{</span>
  <span class='label'>request:</span> <span class='lbrace'>{</span> <span class='label'>open_timeout:</span> <span class='int'>1</span> <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>headers:</span> <span class='lbrace'>{</span> <span class='label'>user_agent:</span>   <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>MyApp</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>params:</span>  <span class='lbrace'>{</span> <span class='symbol'>:format</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>yaml</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>ssl:</span>     <span class='lbrace'>{</span> <span class='label'>verify:</span> <span class='kw'>false</span> <span class='rbrace'>}</span>
<span class='rbrace'>}</span>
</code></pre>

<p>To configure the <em>Faraday</em> instance directly, use a block:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>host:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>port:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9200</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_response'>response</span> <span class='symbol'>:logger</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_adapter'>adapter</span>  <span class='symbol'>:patron</span>
<span class='kw'>end</span>
</code></pre>

<p>You can use any standard Faraday middleware and plugins in the configuration block. You can also initialize the transport class yourself, and pass it to the client constructor as the <code>transport</code> argument:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_transport_configuration'>transport_configuration</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_response'>response</span> <span class='symbol'>:logger</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_adapter'>adapter</span>  <span class='symbol'>:patron</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_transport'>transport</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport.html" title="OpenSearch::Transport (module)">Transport</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport.html" title="OpenSearch::Transport::Transport (module)">Transport</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport/HTTP.html" title="OpenSearch::Transport::Transport::HTTP (module)">HTTP</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport/HTTP/Faraday.html" title="OpenSearch::Transport::Transport::HTTP::Faraday (class)">Faraday</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenSearch/Transport/Transport/Base.html#initialize-instance_method" title="OpenSearch::Transport::Transport::Base#initialize (method)">new</a></span></span> \
  <span class='label'>hosts:</span> <span class='lbracket'>[</span> <span class='lbrace'>{</span> <span class='label'>host:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>port:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9200</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span> <span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='op'>&amp;</span><span class='id identifier rubyid_transport_configuration'>transport_configuration</span>

<span class='comment'># Pass the transport to the client
</span><span class='comment'>#
</span><span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>transport:</span> <span class='id identifier rubyid_transport'>transport</span>
</code></pre>

<p>Instead of passing the transport to the constructor, you can inject it at run time:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># Set up the transport
</span><span class='comment'>#
</span><span class='id identifier rubyid_faraday_configuration'>faraday_configuration</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='symbol'>:@ssl</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>verify:</span> <span class='kw'>false</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_adapter'>adapter</span> <span class='symbol'>:excon</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_faraday_client'>faraday_client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport.html" title="OpenSearch::Transport (module)">Transport</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport.html" title="OpenSearch::Transport::Transport (module)">Transport</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport/HTTP.html" title="OpenSearch::Transport::Transport::HTTP (module)">HTTP</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport/HTTP/Faraday.html" title="OpenSearch::Transport::Transport::HTTP::Faraday (class)">Faraday</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenSearch/Transport/Transport/Base.html#initialize-instance_method" title="OpenSearch::Transport::Transport::Base#initialize (method)">new</a></span></span> \
  <span class='label'>hosts:</span> <span class='lbracket'>[</span> <span class='lbrace'>{</span> <span class='label'>host:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my-protected-host</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
             <span class='label'>port:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>443</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
             <span class='label'>user:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>USERNAME</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
             <span class='label'>password:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>PASSWORD</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
             <span class='label'>scheme:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>https</span><span class='tstring_end'>&#39;</span></span>
          <span class='rbrace'>}</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='op'>&amp;</span><span class='id identifier rubyid_faraday_configuration'>faraday_configuration</span>

<span class='comment'># Create a default client
</span><span class='comment'>#
</span><span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

<span class='comment'># Inject the transport to the client
</span><span class='comment'>#
</span><span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_transport'>transport</span> <span class='op'>=</span> <span class='id identifier rubyid_faraday_client'>faraday_client</span>
</code></pre>

<p>You can also use a bundled href="https://rubygems.org/gems/curb"></a> based transport implementation:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>curb</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>opensearch/transport/transport/http/curb</span><span class='tstring_end'>&#39;</span></span>

<span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>transport_class:</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport.html" title="OpenSearch::Transport (module)">Transport</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport.html" title="OpenSearch::Transport::Transport (module)">Transport</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport/HTTP.html" title="OpenSearch::Transport::Transport::HTTP (module)">HTTP</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport/HTTP/Curb.html" title="OpenSearch::Transport::Transport::HTTP::Curb (class)">Curb</a></span></span>

<span class='id identifier rubyid_client'>client</span><span class='period'>.</span><span class='id identifier rubyid_transport'>transport</span><span class='period'>.</span><span class='id identifier rubyid_connections'>connections</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_connection'>connection</span>
<span class='comment'># =&gt; #&lt;Curl::Easy http://localhost:9200/&gt;
</span></code></pre>

<p>It’s possible to customize the <em>Curb</em> instance by passing a block to the constructor as well (in this case, as an inline block):</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_transport'>transport</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport.html" title="OpenSearch::Transport (module)">Transport</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport.html" title="OpenSearch::Transport::Transport (module)">Transport</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport/HTTP.html" title="OpenSearch::Transport::Transport::HTTP (module)">HTTP</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenSearch/Transport/Transport/HTTP/Curb.html" title="OpenSearch::Transport::Transport::HTTP::Curb (class)">Curb</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenSearch/Transport/Transport/Base.html#initialize-instance_method" title="OpenSearch::Transport::Transport::Base#initialize (method)">new</a></span></span> \
  <span class='label'>hosts:</span> <span class='lbracket'>[</span> <span class='lbrace'>{</span> <span class='label'>host:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>localhost</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>port:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>9200</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span> <span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='op'>&amp;</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_verbose'>verbose</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='rbrace'>}</span>

<span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenSearch.html" title="OpenSearch (module)">OpenSearch</a></span></span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='label'>transport:</span> <span class='id identifier rubyid_transport'>transport</span>
</code></pre>

<p>You can write your own transport implementation easily, by including the <span class='object_link'><a href="OpenSearch/Transport/Transport/Base.html" title="OpenSearch::Transport::Transport::Base (module)">OpenSearch::Transport::Transport::Base</a></span> module, implementing the required contract, and passing it to the client as the <code>transport_class</code> parameter – or injecting it directly.</p>

<h3 id="label-Serializer+Implementations">Serializer Implementations</h3>

<p>By default, the <a href="http://rubygems.org/gems/multi_json">MultiJSON</a> library is used as the serializer implementation, and it will pick up the “right” adapter based on gems available.</p>

<p>The serialization component is pluggable, though, so you can write your own by including the <span class='object_link'><a href="OpenSearch/Transport/Transport/Serializer/Base.html" title="OpenSearch::Transport::Transport::Serializer::Base (module)">OpenSearch::Transport::Transport::Serializer::Base</a></span> module, implementing the required contract, and passing it to the client as the <code>serializer_class</code> or <code>serializer</code> parameter.</p>

<h3 id="label-Exception+Handling">Exception Handling</h3>

<p>The library defines a <a href="https://github.com/opensearch-project/opensearch-ruby/blob/main/opensearch-transport/lib/opensearch/transport/transport/errors.rb">number of exception classes</a> for various client and server errors, as well as unsuccessful HTTP responses, making it possible to <code>rescue</code> specific exceptions with desired granularity.</p>

<p>The highest-level exception is <span class='object_link'><a href="OpenSearch/Transport/Transport/Error.html" title="OpenSearch::Transport::Transport::Error (class)">OpenSearch::Transport::Transport::Error</a></span> and will be raised for any generic client <em>or</em> server errors.</p>

<p><span class='object_link'><a href="OpenSearch/Transport/Transport/ServerError.html" title="OpenSearch::Transport::Transport::ServerError (class)">OpenSearch::Transport::Transport::ServerError</a></span> will be raised for server errors only.</p>

<p>As an example for response-specific errors, a <code>404</code> response status will raise an OpenSearch::Transport::Transport::Errors::NotFound exception.</p>

<p>Finally, <span class='object_link'><a href="OpenSearch/Transport/Transport/SnifferTimeoutError.html" title="OpenSearch::Transport::Transport::SnifferTimeoutError (class)">OpenSearch::Transport::Transport::SnifferTimeoutError</a></span> will be raised when connection reloading (“sniffing”) times out.</p>

<h2 id="label-Development+and+Community">Development and Community</h2>

<p>For local development, clone the repository and run <code>bundle install</code>. See <code>rake -T</code> for a list of available Rake tasks for running tests, generating documentation, starting a testing cluster, etc.</p>

<p>Bug fixes and features must be covered by unit tests. Integration tests are written in Ruby 1.9 syntax.</p>

<p>Github’s pull requests and issues are used to communicate, send bug reports and code contributions.</p>

<h2 id="label-The+Architecture">The Architecture</h2>
<ul><li>
<p><span class='object_link'><a href="OpenSearch/Transport/Client.html" title="OpenSearch::Transport::Client (class)">OpenSearch::Transport::Client</a></span> is composed of <span class='object_link'><a href="OpenSearch/Transport/Transport.html" title="OpenSearch::Transport::Transport (module)">OpenSearch::Transport::Transport</a></span></p>
</li><li>
<p><span class='object_link'><a href="OpenSearch/Transport/Transport.html" title="OpenSearch::Transport::Transport (module)">OpenSearch::Transport::Transport</a></span> is composed of <span class='object_link'><a href="OpenSearch/Transport/Transport/Connections.html" title="OpenSearch::Transport::Transport::Connections (module)">OpenSearch::Transport::Transport::Connections</a></span>,  and an instance of logger, tracer, serializer and sniffer.</p>
</li><li>
<p>Logger and tracer can be any object conforming to Ruby logging interface,  ie. an instance of href="http://www.ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html"></a>,  href="https://rubygems.org/gems/log4r"></a>, href="https://github.com/TwP/logging/"></a>, etc.</p>
</li><li>
<p>The <span class='object_link'><a href="OpenSearch/Transport/Transport/Serializer/Base.html" title="OpenSearch::Transport::Transport::Serializer::Base (module)">OpenSearch::Transport::Transport::Serializer::Base</a></span> implementations handle converting data for OpenSearch  (eg. to JSON). You can implement your own serializer.</p>
</li><li>
<p><span class='object_link'><a href="OpenSearch/Transport/Transport/Sniffer.html" title="OpenSearch::Transport::Transport::Sniffer (class)">OpenSearch::Transport::Transport::Sniffer</a></span> allows to discover nodes in the cluster and use them as connections.</p>
</li><li>
<p><span class='object_link'><a href="OpenSearch/Transport/Transport/Connections/Collection.html" title="OpenSearch::Transport::Transport::Connections::Collection (class)">OpenSearch::Transport::Transport::Connections::Collection</a></span> is composed of  <span class='object_link'><a href="OpenSearch/Transport/Transport/Connections/Connection.html" title="OpenSearch::Transport::Transport::Connections::Connection (class)">OpenSearch::Transport::Transport::Connections::Connection</a></span> instances and a selector instance.</p>
</li><li>
<p><span class='object_link'><a href="OpenSearch/Transport/Transport/Connections/Connection.html" title="OpenSearch::Transport::Transport::Connections::Connection (class)">OpenSearch::Transport::Transport::Connections::Connection</a></span> contains the connection attributes such as hostname and port,  as well as the concrete persistent "session" connected to a specific node.</p>
</li><li>
<p>The <span class='object_link'><a href="OpenSearch/Transport/Transport/Connections/Selector/Base.html" title="OpenSearch::Transport::Transport::Connections::Selector::Base (module)">OpenSearch::Transport::Transport::Connections::Selector::Base</a></span> implementations allow to choose connections  from the pool, eg. in a round-robin or random fashion. You can implement your own selector strategy.</p>
</li></ul>

<h2 id="label-Development">Development</h2>

<p>To work on the code, clone and bootstrap the main repository first – please see instructions in the main <a href="../README_md.html#development">README</a>.</p>

<p>To run tests, launch a testing cluster and use the Rake tasks:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_time'>time</span> <span class='id identifier rubyid_rake'>rake</span> <span class='label'>test:</span><span class='id identifier rubyid_unit'>unit</span>
<span class='id identifier rubyid_time'>time</span> <span class='id identifier rubyid_rake'>rake</span> <span class='label'>test:</span><span class='id identifier rubyid_integration'>integration</span>
</code></pre>

<p>Use <code>COVERAGE=true</code> before running a test task to check coverage with Simplecov.</p>

<h2 id="label-License">License</h2>

<p>This software is licensed under the <a href="./LICENSE">Apache 2 license</a>.</p>
</div></div>

      <div id="footer">
  Generated on Tue Feb 14 18:57:59 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-3.1.3).
</div>

    </div>
  </body>
</html>